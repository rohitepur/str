{% extends "base.html" %}
{% block content %}
<h2>Booking Requests</h2>

{% if requests %}
<table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
    <thead>
        <tr style="background-color: #f5f5f5;">
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Date</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Name</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Email</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Phone</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Check-in</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Check-out</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Guests</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Action</th>
        </tr>
    </thead>
    <tbody>
        {% for req in requests %}
        <tr>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.name }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.email }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.phone or 'N/A' }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.check_in_date }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.check_out_date }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">{{ req.number_of_guests }}</td>
            <td style="border: 1px solid #ddd; padding: 12px;">
                <form method="post" action="{{ url_for('delete_request', request_id=req.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this request?')">
                    <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No booking requests yet.</p>
{% endif %}

<div style="margin-top: 30px;">
    <a href="{{ url_for('admin_agreements') }}" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-right: 10px;">View Agreements</a>
    <a href="{{ url_for('admin_unsigned') }}" style="background-color: #ffc107; color: black; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-right: 10px;">Unsigned Agreements</a>
    <a href="{{ url_for('generate_link') }}" style="background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Generate Booking Link</a>
</div>
{% endblock %}